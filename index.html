<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Seducer's Playbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Tailwind gray-900 */
        }
        .font-title {
            font-family: 'Cormorant Garamond', serif;
        }
        .nav-item {
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-item.active {
            color: #FBBF24; /* Tailwind amber-400 */
            border-bottom-color: #FBBF24;
        }
        .nav-item:hover {
            color: #FBBF24;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        /* Custom scrollbar for a more refined look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1F2937; /* gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4B5563; /* gray-600 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6B7280; /* gray-500 */
        }
        /* Animation for content fade-in */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        /* Aspect ratio for video embeds */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            border-radius: 0.5rem; /* rounded-lg */
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="text-gray-300">

    <div id="app-container" class="min-h-screen bg-gray-900">
        <!-- Header -->
        <header class="bg-gray-800/50 backdrop-blur-sm shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    <h1 class="text-3xl md:text-4xl font-title text-white tracking-wider">The Seducer's Playbook</h1>
                    <nav class="hidden md:flex items-center space-x-8 text-lg">
                        <a class="nav-item active" data-target="home">Home</a>
                        <a class="nav-item" data-target="archetypes">Archetypes</a>
                        <a class="nav-item" data-target="laws">The 24 Laws</a>
                        <a class="nav-item" data-target="videos">Videos</a>
                        <a class="nav-item" data-target="scenarios">Practice</a>
                        <a class="nav-item" data-target="journal">Journal</a>
                    </nav>
                </div>
            </div>
        </header>
        
        <!-- Mobile Bottom Navigation -->
        <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-gray-800 shadow-t-lg z-50 flex justify-around p-2">
            <a class="nav-item flex-1 text-center p-2 text-xs active" data-target="home">Home</a>
            <a class="nav-item flex-1 text-center p-2 text-xs" data-target="archetypes">Archetypes</a>
            <a class="nav-item flex-1 text-center p-2 text-xs" data-target="laws">Laws</a>
            <a class="nav-item flex-1 text-center p-2 text-xs" data-target="videos">Videos</a>
            <a class="nav-item flex-1 text-center p-2 text-xs" data-target="scenarios">Practice</a>
            <a class="nav-item flex-1 text-center p-2 text-xs" data-target="journal">Journal</a>
        </nav>


        <!-- Main Content -->
        <main class="container mx-auto p-4 sm:p-6 lg:p-8 pb-24 md:pb-8">
            <!-- Home Section -->
            <section id="home" class="content-section active fade-in">
                <div class="bg-gray-800 p-8 rounded-lg shadow-2xl border border-gray-700">
                    <h2 class="text-4xl font-title text-amber-400 mb-4">Welcome to the Art of Seduction</h2>
                    <p class="text-lg mb-6">Seduction is a game of psychology, not beauty, and it is within the grasp of any person to become a master of the art. This playbook is your guide to understanding and practicing the timeless principles of influence, desire, and persuasion outlined by Robert Greene.</p>
                    <p class="mb-4">Use the navigation to explore:</p>
                    <ul class="list-disc list-inside space-y-2 mb-6 text-gray-400">
                        <li><strong class="text-amber-400">Archetypes:</strong> Discover the 9 types of seducers and identify your own potential strengths.</li>
                        <li><strong class="text-amber-400">The 24 Laws:</strong> Learn the step-by-step process of a successful seduction.</li>
                        <li><strong class="text-amber-400">Videos:</strong> Watch curated content to see the principles in action.</li>
                        <li><strong class="text-amber-400">Practice:</strong> Test your knowledge with interactive scenarios.</li>
                        <li><strong class="text-amber-400">Journal:</strong> Keep a private log of your observations and experiences.</li>
                    </ul>
                    <p class="text-sm italic text-gray-500">"Seduction is a game of attention, of slowly bringing a person's mind to one point: you." - Robert Greene</p>
                </div>
            </section>

            <!-- Archetypes Section -->
            <section id="archetypes" class="content-section">
                <h2 class="text-4xl font-title text-amber-400 mb-6">The 9 Seducer Archetypes</h2>
                <div id="archetypes-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Archetypes will be dynamically inserted here -->
                </div>
            </section>

            <!-- Laws Section -->
            <section id="laws" class="content-section">
                <h2 class="text-4xl font-title text-amber-400 mb-6">The 24 Laws of Seduction</h2>
                <div id="laws-list" class="space-y-4">
                    <!-- Laws will be dynamically inserted here -->
                </div>
            </section>
            
            <!-- Videos Section -->
            <section id="videos" class="content-section">
                <h2 class="text-4xl font-title text-amber-400 mb-6">Curated Videos</h2>
                <div id="videos-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Videos will be dynamically inserted here -->
                </div>
            </section>

            <!-- Scenarios Section -->
            <section id="scenarios" class="content-section">
                 <h2 class="text-4xl font-title text-amber-400 mb-6">Practice Scenarios</h2>
                 <div id="scenario-container" class="bg-gray-800 p-8 rounded-lg shadow-2xl border border-gray-700">
                    <!-- Scenarios will be dynamically loaded here -->
                 </div>
            </section>

            <!-- Journal Section -->
            <section id="journal" class="content-section">
                <h2 class="text-4xl font-title text-amber-400 mb-6">Private Journal</h2>
                <div class="bg-gray-800 p-6 rounded-lg shadow-2xl border border-gray-700">
                    <p class="mb-4 text-gray-400">Use this space to document your thoughts, plans, and observations. Your entries are saved locally in your browser and are not shared with anyone.</p>
                    <textarea id="journal-textarea" class="w-full h-96 bg-gray-900 text-gray-300 p-4 rounded-md border border-gray-600 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 transition"></textarea>
                    <div class="mt-4 flex space-x-4">
                        <button id="save-journal" class="bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition">Save Entry</button>
                        <button id="clear-journal" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition">Clear Journal</button>
                    </div>
                    <p id="save-confirm" class="text-green-400 mt-2 opacity-0 transition-opacity">Saved!</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for details -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div id="modal-content" class="bg-gray-800 text-gray-300 rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-700">
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <h3 id="modal-title" class="text-3xl font-title text-amber-400 mb-4"></h3>
                    <button id="modal-close" class="text-gray-400 hover:text-white text-3xl">&times;</button>
                </div>
                <div id="modal-body" class="prose prose-invert max-w-none text-gray-300"></div>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA ---
        const archetypesData = [
            { title: "The Siren", description: "Lures victims with an irresistible promise of pleasure and adventure. Operates on a man's basic emotions. Appears as a fantasy, larger than life.", details: "Sirens have an abundance of sexual energy and know how to use it. They are masters of the alluring voice and the decorated appearance. They create an image of pure, uninhibited pleasure, making them seem like an escape from the mundane world." },
            { title: "The Rake", description: "Insatiably desires and pursues women, moving from one to the next. Their appeal lies in their intense, undivided attention and reputation.", details: "The Rake does not hesitate to express his desire. His language is unapologetically sexual and his focus on the victim is intense, making them feel like the most desired person in the world. His reputation as a great lover precedes him, creating a powerful allure." },
            { title: "The Ideal Lover", description: "Reflects the victim's fantasy. They study their target and mirror their deepest desires, appearing as the perfect, dreamed-of partner.", details: "Ideal Lovers are masters of observation. They listen more than they talk, uncovering what's missing in their victim's life. They then construct a persona that fills that void, creating a powerful and addictive illusion of perfection." },
            { title: "The Dandy", description: "Plays with gender roles and creates a striking, ambiguous, and fascinating image. They are fluid and refuse to be categorized.", details: "Dandies attract through their psychological independence and unique style. They are not concerned with pleasing others and this self-sufficiency is magnetic. Their ambiguity makes them an object of fascination." },
            { title: "The Natural", description: "Embodies the longed-for qualities of childhood—spontaneity, sincerity, and unpretentiousness. They are a breath of fresh air.", details: "Naturals bring a sense of playfulness and ease. They seem open and unguarded, which disarms their victims. In a world full of cynicism, their apparent innocence is a powerful seductive tool." },
            { title: "The Coquette", description: "Masters of the art of delayed gratification. They lure with the promise of reward, then withdraw, keeping the victim in a state of suspense.", details: "Coquettes are self-sufficient. They seem to not need their victim, which is maddening and intriguing. They alternate between warmth and coldness, hope and frustration, creating a powerful emotional rollercoaster that gets their victims addicted." },
            { title: "The Charmer", description: "Makes the victim the center of attention. They are masters of creating comfort, pleasure, and a feeling of being understood.", details: "Charmers operate by focusing completely on their target. They deflect attention from themselves and make the other person feel fascinating. This validation is highly seductive, lowering defenses and creating deep attachment." },
            { title: "The Charismatic", description: "Possesses an inner confidence, sexual energy, and sense of purpose that radiates outward, making them seem extraordinary.", details: "Charisma is a presence that excites. Charismatics have an intense gaze, powerful rhetoric, and an air of mystery. People are drawn to their energy and believe in their cause or vision, often without knowing why." },
            { title: "The Star", description: "Lives in a world of their own, distinct and distant. Their distance and dreamlike quality make others want to get closer.", details: "Stars create a unique and ethereal persona. They combine a dazzling presence with a cool detachment. People project their own fantasies onto the Star, who remains a mysterious and untouchable figure." },
        ];

        const lawsData = [
            { title: "1. Choose the Right Victim", description: "Not everyone is open to your charms. Focus your energy on those who are unoccupied or unhappy, who see in you a chance for escape or change." },
            { title: "2. Create a False Sense of Security—Approach Indirectly", description: "A direct assault is clumsy. Approach your target through a third party, or seem to be interested in them as a friend. Lull them into a feeling of safety." },
            { title: "3. Send Mixed Signals", description: "Once they are comfortable, unsettle them. Hint at a deeper interest, then pull back. Be both spiritual and earthy, innocent and cunning. This ambiguity is intriguing." },
            { title: "4. Appear to Be an Object of Desire—Create Triangles", description: "You must seem desirable. Show that others want you; this makes you a prize. The attention of others validates your worth and sparks competitive desire." },
            { title: "5. Create a Need—Stir Anxiety and Discontent", description: "A perfectly satisfied person cannot be seduced. Gently make them aware of what they are missing in life, the adventure and romance you can provide." },
            { title: "6. Master the Art of Insinuation", description: "Plant ideas in their mind subtly. Use suggestive comments, double entendres, and ambiguous remarks. Let them think they are the ones with the seductive thoughts." },
            { title: "7. Enter Their Spirit", description: "Play by their rules. Adapt to their moods, tastes, and way of thinking. This mirroring makes them feel understood and lowers their defenses." },
            { title: "8. Create Temptation", description: "Lure them with a glimpse of the pleasure to come. Hint at a forbidden fruit or a great adventure. The target must be dying to try what you are offering." },
            { title: "9. Keep Them in Suspense—What Comes Next?", description: "Be unpredictable. Arrange a meeting, then cancel. Be warm, then suddenly cool. This emotional rollercoaster creates anticipation and keeps you on their mind." },
            { title: "10. Use the Demonic Power of Words to Sow Confusion", description: "Use charged, emotional, and flattering language. Inflate their ego, speak of grand themes, and create a fantasy world with your words." },
            { title: "11. Pay Attention to Detail", description: "Remember their likes and dislikes. Give thoughtful, personalized gifts. These small gestures show how much you are thinking of them and create a powerful effect." },
            { title: "12. Poetize Your Presence", description: "Associate yourself with art, music, and sublime experiences. Make your encounters feel like they are straight out of a movie or a poem." },
            { title: "13. Disarm Through Strategic Weakness and Vulnerability", description: "Don't be afraid to show a flaw or a moment of weakness. This makes you seem more human and relatable, and encourages the target to 'save' you." },
            { title: "14. Confuse Desire and Reality—The Perfect Illusion", description: "Create moments that are dreamlike and theatrical. Blur the lines between what is real and what is fantasy, making them long for the illusion you've created." },
            { title: "15. Isolate the Victim", description: "Take them away from their familiar environment—their friends, family, and home. In isolation, your influence becomes much more potent." },
            { title: "16. Prove Yourself", description: "Show your worth through action. Undertake a challenge, help them with a problem, or show your devotion in a tangible way. Words are cheap; deeds are convincing." },
            { title: "17. Effect a Regression", description: "Stir up deep, infantile emotions. Position yourself as a parental figure—offering security or, conversely, encouraging rebellion and oedipal feelings." },
            { title: "18. Stir Up the Transgressive and Taboo", description: "People are secretly drawn to what is forbidden. Lead them to cross a line, to do something that feels naughty or dangerous. The shared secret creates a powerful bond." },
            { title: "19. Use Spiritual Lures", description: "Appeal to their higher self. Talk of destiny, cosmic connection, or spiritual union. Make the seduction seem like something more than just physical desire." },
            { title: "20. Mix Pleasure with Pain", description: "The greatest pleasure is relief from pain. After a period of doubt or distance, a return to kindness will be doubly potent. Keep them off-balance." },
            { title: "21. Give Them Space to Fall—The Pursuer Is Pursued", description: "After you have made them obsessed, withdraw. Let them come to you. Their active pursuit will deepen their feelings and seal their fate." },
            { title: "22. Use Physical Lures", description: "While their mind is reeling, use non-verbal cues. A lingering glance, an 'accidental' touch, a seductive tone of voice. These bypass conscious thought." },
            { title: "23. Master the Art of the Bold Move", description: "There comes a moment when all doubt must be erased. Do not be timid. Make a decisive, confident move. Hesitation will ruin the effect." },
            { title: "24. Beware the Aftereffects", description: "When the seduction is over, you must manage the landing. A clumsy ending can create resentment and a desire for revenge. Part artfully or transition them into a new reality." },
        ];

        // UPDATED: More scenarios added
        const scenariosData = [
            {
                scenario: "You're at a social event and see someone you're interested in across the room. They are surrounded by friends and seem engaged in conversation. What is your opening move?",
                options: [
                    { text: "Wait for them to be alone, then walk over and directly introduce yourself.", correct: false, feedback: "Too direct. This can put them on the defensive. A more subtle approach is needed (Law 2)." },
                    { text: "Approach their group, join the conversation naturally, and slowly pivot your attention to your target.", correct: true, feedback: "Excellent. This is an indirect approach that creates a false sense of security (Law 2)." },
                    { text: "Send them a drink via the waiter with a mysterious note.", correct: false, feedback: "While intriguing, this can come off as cheesy or too forward. It's better to establish a presence first." },
                    { text: "Try to make prolonged eye contact from across the room until they come to you.", correct: false, feedback: "This can be perceived as creepy rather than seductive. It puts too much pressure on them." }
                ]
            },
            {
                scenario: "You've been on a couple of casual dates. Things are going well, but you want to deepen the intrigue. What do you do?",
                options: [
                    { text: "Tell them exactly how much you like them and that you want to be exclusive.", correct: false, feedback: "Too soon. This removes all mystery and can kill the tension you've built." },
                    { text: "Become slightly less available and more unpredictable with your communication.", correct: true, feedback: "Perfect. Sending mixed signals and keeping them in suspense makes you an object of fascination (Laws 3 & 9)." },
                    { text: "Shower them with expensive gifts to show how much you care.", correct: false, feedback: "This can seem like you're trying to buy their affection and lacks subtlety (violates Law 11's spirit)." },
                    { text: "Talk constantly about your past relationships to show you're experienced.", correct: false, feedback: "This is a major error. It makes you seem hung up on the past and not focused on them." }
                ]
            },
            {
                scenario: "Your target mentions they have a deep passion for a niche subject you know nothing about (e.g., 18th-century poetry). How do you proceed?",
                options: [
                    { text: "Pretend you are also an expert on the topic.", correct: false, feedback: "Risky. You will likely be exposed as a fraud, destroying all trust." },
                    { text: "Show genuine curiosity, ask intelligent questions, and let them teach you. Later, surprise them with a thoughtful follow-up.", correct: true, feedback: "Correct. You enter their spirit, making them feel valued and understood (Law 7). The follow-up shows attention to detail (Law 11)." },
                    { text: "Quickly change the subject to something you are more comfortable with.", correct: false, feedback: "This shows you are not truly interested in them, only in talking about yourself." },
                    { text: "Gently poke fun at their niche interest to create a playful dynamic.", correct: false, feedback: "This is likely to offend them and make them feel judged, which is the opposite of seductive." }
                ]
            },
            {
                scenario: "You're talking with your target and a mutual acquaintance joins the conversation. The acquaintance is clearly attracted to you. How do you leverage this?",
                options: [
                    { text: "Ignore the acquaintance and focus all your energy on your target.", correct: false, feedback: "This misses a key opportunity. Ignoring the other person can seem rude and closes off a strategic angle." },
                    { text: "Politely excuse yourself from the conversation to avoid any awkwardness.", correct: false, feedback: "This shows a lack of social grace and an inability to handle complex situations." },
                    { text: "Engage warmly with the acquaintance for a few moments, showing you are desirable, before turning your primary attention back to your target.", correct: true, feedback: "Perfect. You are creating a 'triangle' of desire (Law 4). Showing that others desire you makes you more valuable and intriguing to your target." },
                    { text: "Leave with the new acquaintance to make your original target jealous.", correct: false, feedback: "Too aggressive. This will likely create resentment rather than attraction. The goal is to spark interest, not anger." }
                ]
            },
            {
                scenario: "Your target is very self-sufficient and seems to have it all together, making it hard to find a 'need' to fill. How do you create an opening?",
                options: [
                    { text: "Confess a personal problem or weakness, making yourself seem more human and inviting them to offer advice or comfort.", correct: true, feedback: "Excellent. This is 'Disarming Through Strategic Weakness' (Law 13). It makes you relatable and allows the target to lower their guard and play the role of the helper." },
                    { text: "Brag about your own accomplishments to prove you are their equal.", correct: false, feedback: "This creates competition, not connection. It's more likely to intimidate or annoy them than to attract them." },
                    { text: "Criticize something in their 'perfect' life to show you see a flaw they don't.", correct: false, feedback: "This is arrogant and will put them on the defensive immediately. You must create need subtly, not through direct criticism." },
                    { text: "Wait for them to show a sign of weakness, however long it takes.", correct: false, feedback: "Too passive. Seduction requires you to actively shape the dynamic, not just wait for opportunities to fall in your lap." }
                ]
            },
            {
                scenario: "You've successfully made your target intensely interested. They are now contacting you frequently and seeking you out. What is the correct move at this stage?",
                options: [
                    { text: "Increase the intensity, spending as much time with them as possible to solidify the bond.", correct: false, feedback: "Incorrect. This smothers the flame. Constant presence removes the tension and mystery you've built." },
                    { text: "Take a calculated step back. Become slightly less available and let them pursue you, filling their imagination with thoughts of you.", correct: true, feedback: "Precisely. This is 'Giving Them Space to Fall' (Law 21). Their active pursuit will cement their feelings for you far more than your continued presence." },
                    { text: "Test their devotion by asking them to do a large favor for you.", correct: false, feedback: "This can seem manipulative and transactional. While 'Prove Yourself' (Law 16) is a valid step, it's usually something you do for them, not the other way around at this stage." },
                    { text: "Make a bold move and escalate the relationship physically and emotionally.", correct: false, feedback: "Potentially too soon. While the bold move is a key step (Law 23), it's often more powerful after a period of withdrawal and pursuit from their side." }
                ]
            }
        ];
        let currentScenarioIndex = 0;

        const videosData = [
            {
                title: "The Art of Seduction by Robert Greene I Detailed Animated Book Summary",
                description: "A detailed animated summary covering the core concepts of The Art of Seduction.",
                url: "https://www.youtube.com/watch?v=nUgHSxOAlWw"
            },
            {
                title: "The Anti-Seducer",
                description: "Learn what not to do by understanding the traits and behaviors of the Anti-Seducer.",
                url: "https://www.youtube.com/watch?v=R3PXAg_U9pY"
            },
            {
                title: "The Ideal Seducer",
                description: "Explore the qualities and mindset of the Ideal Lover archetype, a master of fantasy.",
                url: "https://www.youtube.com/watch?v=7Sf_jfKokGk"
            },
            {
                title: "How to speak so that people want to listen",
                description: "A highly acclaimed TED Talk by Julian Treasure on using your voice with power and authority.",
                url: "https://www.youtube.com/watch?v=eIho2S0ZahI"
            }
        ];

        // --- RENDER FUNCTIONS ---
        const archetypesGrid = document.getElementById('archetypes-grid');
        archetypesData.forEach(archetype => {
            const card = document.createElement('div');
            card.className = 'bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 hover:border-amber-400 hover:shadow-amber-400/10 transition-all duration-300 cursor-pointer';
            card.innerHTML = `
                <h3 class="text-2xl font-title text-amber-400 mb-2">${archetype.title}</h3>
                <p class="text-gray-400">${archetype.description}</p>
            `;
            card.addEventListener('click', () => openModal(archetype.title, `<p>${archetype.details}</p>`));
            archetypesGrid.appendChild(card);
        });

        const lawsList = document.getElementById('laws-list');
        lawsData.forEach(law => {
            const item = document.createElement('div');
            item.className = 'group bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700 hover:border-amber-400 hover:shadow-amber-400/10 transition-all duration-300 cursor-pointer flex justify-between items-center';
            item.innerHTML = `
                <p class="text-lg">${law.title}</p>
                <svg class="w-5 h-5 text-gray-500 group-hover:text-amber-400 transition-colors" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                </svg>
            `;
            item.addEventListener('click', () => openModal(law.title, `<p>${law.description}</p>`));
            lawsList.appendChild(item);
        });
        
        // Video Rendering
        const videosGrid = document.getElementById('videos-grid');
        function getYoutubeEmbedUrl(url) {
            let videoId = '';
            try {
                const urlObj = new URL(url);
                if (urlObj.hostname === 'youtu.be') {
                    videoId = urlObj.pathname.slice(1);
                } else if (urlObj.hostname === 'www.youtube.com' || urlObj.hostname === 'youtube.com') {
                    videoId = urlObj.searchParams.get('v');
                }
            } catch (e) {
                console.error('Invalid URL for video:', url);
                return null;
            }
            return videoId ? `https://www.youtube.com/embed/${videoId}` : null;
        }

        videosData.forEach(video => {
            const embedUrl = getYoutubeEmbedUrl(video.url);
            if (embedUrl) {
                const videoCard = document.createElement('div');
                videoCard.className = 'bg-gray-800 rounded-lg shadow-lg border border-gray-700 overflow-hidden';
                videoCard.innerHTML = `
                    <div class="video-container">
                        <iframe src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-title text-amber-400 mb-2">${video.title}</h3>
                        <p class="text-gray-400">${video.description}</p>
                    </div>
                `;
                videosGrid.appendChild(videoCard);
            }
        });

        // --- SCENARIO LOGIC ---
        const scenarioContainer = document.getElementById('scenario-container');
        function loadScenario(index) {
            const data = scenariosData[index];
            scenarioContainer.innerHTML = `
                <p class="text-lg mb-6 text-gray-400">${data.scenario}</p>
                <div id="options-container" class="space-y-4"></div>
                <div id="feedback-container" class="mt-6 p-4 rounded-md hidden"></div>
                <button id="next-scenario" class="mt-6 bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition hidden">Next Scenario</button>
            `;

            const optionsContainer = document.getElementById('options-container');
            data.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'block w-full text-left bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition border-2 border-transparent';
                button.textContent = option.text;
                button.onclick = () => {
                    const feedbackContainer = document.getElementById('feedback-container');
                    const allOptionButtons = optionsContainer.querySelectorAll('button');
                    
                    allOptionButtons.forEach(btn => {
                        btn.disabled = true;
                        btn.classList.remove('hover:bg-gray-600');
                    });

                    if (option.correct) {
                        feedbackContainer.className = 'mt-6 p-4 rounded-md bg-green-900/50 text-green-300 border border-green-700';
                        feedbackContainer.textContent = option.feedback;
                        button.className += ' border-green-500';
                    } else {
                        feedbackContainer.className = 'mt-6 p-4 rounded-md bg-red-900/50 text-red-300 border border-red-700';
                        feedbackContainer.textContent = option.feedback;
                        button.className += ' border-red-500';
                    }
                    feedbackContainer.classList.remove('hidden');
                    document.getElementById('next-scenario').classList.remove('hidden');
                };
                optionsContainer.appendChild(button);
            });

            document.getElementById('next-scenario').onclick = () => {
                currentScenarioIndex = (currentScenarioIndex + 1) % scenariosData.length;
                loadScenario(currentScenarioIndex);
            };
        }
        
        // --- NAVIGATION ---
        const navItems = document.querySelectorAll('.nav-item');
        const contentSections = document.querySelectorAll('.content-section');

        function switchTab(targetId) {
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            const targetSection = document.getElementById(targetId);
            const targetNavItems = document.querySelectorAll(`.nav-item[data-target="${targetId}"]`);
            
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.classList.remove('fade-in');
                void targetSection.offsetWidth; // Trigger reflow
                targetSection.classList.add('fade-in');
            }
            targetNavItems.forEach(item => item.classList.add('active'));

            if (targetId === 'scenarios' && !scenarioContainer.querySelector('#options-container')) {
                loadScenario(currentScenarioIndex);
            }
        }

        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                switchTab(e.target.dataset.target);
            });
        });

        // --- MODAL LOGIC ---
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalClose = document.getElementById('modal-close');

        function openModal(title, body) {
            modalTitle.textContent = title;
            modalBody.innerHTML = body;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        modalClose.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // --- JOURNAL LOGIC ---
        const journalTextarea = document.getElementById('journal-textarea');
        const saveButton = document.getElementById('save-journal');
        const clearButton = document.getElementById('clear-journal');
        const saveConfirm = document.getElementById('save-confirm');

        journalTextarea.value = localStorage.getItem('seducerJournal') || '';

        saveButton.addEventListener('click', () => {
            localStorage.setItem('seducerJournal', journalTextarea.value);
            saveConfirm.style.opacity = '1';
            setTimeout(() => {
                saveConfirm.style.opacity = '0';
            }, 2000);
        });

        clearButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear your entire journal? This cannot be undone.')) {
                journalTextarea.value = '';
                localStorage.removeItem('seducerJournal');
            }
        });

        // --- INITIALIZE ---
        switchTab('home');
        loadScenario(currentScenarioIndex);

    });
    </script>
</body>
</html>

